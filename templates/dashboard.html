<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignalCrawler | Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>

    <header>
        <div class="logo">
            <div class="logo-icon">üï∑Ô∏è</div>
            <div class="logo-text">
                <h1>SignalCrawler</h1>
                <span class="version-badge">v2.0 ‚Ä¢ $250 Risk ‚Ä¢ 80%+ ‚Ä¢ 2:1 R:R</span>
            </div>
        </div>
        <div class="header-status">
            <div class="live-indicator">
                <div class="live-dot"></div>
                <span>LIVE</span>
            </div>
            <div class="current-time" id="currentTime">--:--:--</div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs">
        <button class="nav-tab active" data-tab="dashboard" onclick="switchTab('dashboard')">üìä Dashboard</button>
        <button class="nav-tab" data-tab="apex" onclick="switchTab('apex')">‚ö†Ô∏è Apex Rules</button>
        <button class="nav-tab" data-tab="analytics" onclick="switchTab('analytics')">üìà Analytics</button>
        <button class="nav-tab" data-tab="coach" onclick="switchTab('coach')">üß† AI Coach</button>
    </nav>

    <main>
        <!-- Dashboard Tab -->
        <div id="tab-dashboard" class="tab-content active">
        <!-- Status Cards -->
        <div class="status-grid">
            <div class="status-card">
                <div class="status-card-header">
                        <span class="status-card-title">Win Rate</span>
                        <span class="status-badge ok">--</span>
                </div>
                    <div class="status-value green" id="winRate">--%</div>
                    <div class="status-subtitle" id="winLossCount">0W / 0L</div>
            </div>
            <div class="status-card">
                <div class="status-card-header">
                        <span class="status-card-title">Total P&L</span>
                        <span class="status-badge ok">Ticks</span>
                </div>
                    <div class="status-value" id="totalPnl">0</div>
                    <div class="status-subtitle">Cumulative profit/loss</div>
            </div>
            <div class="status-card">
                <div class="status-card-header">
                        <span class="status-card-title">Today's P&L</span>
                        <span class="status-badge warning">Today</span>
                </div>
                    <div class="status-value" id="todayPnl">0</div>
                    <div class="status-subtitle" id="todayRecord">0W / 0L today</div>
            </div>
            <div class="status-card">
                <div class="status-card-header">
                        <span class="status-card-title">Tracking</span>
                        <span class="status-badge ok">Active</span>
                </div>
                    <div class="status-value blue" id="trackingCount">0</div>
                    <div class="status-subtitle">Pending outcomes</div>
                </div>
            </div>

            <!-- v2.0 Quick Status Row -->
            <div class="status-grid v2-status" style="margin-bottom: 24px;">
                <!-- News Filter Card -->
                <div class="status-card news-card" id="newsCard">
                    <div class="status-card-header">
                        <span class="status-card-title">üì∞ News Filter</span>
                        <span class="status-badge ok" id="newsBadge">CLEAR</span>
                    </div>
                    <div class="status-value" id="newsValue" style="font-size: 1rem;">Loading...</div>
                    <div class="status-subtitle" id="newsSubtitle">Next high-impact event</div>
                </div>

                <!-- Daily Bias Card -->
                <div class="status-card bias-card" id="biasCard">
                    <div class="status-card-header">
                        <span class="status-card-title">üéØ Daily Bias</span>
                        <span class="status-badge warning" id="biasBadge">WAITING</span>
                    </div>
                    <div class="status-value" id="biasValue" style="font-size: 1.3rem;">--</div>
                    <div class="status-subtitle" id="biasSubtitle">ORB not yet formed</div>
                </div>

                <!-- Today's Signals Card -->
                <div class="status-card signals-today-card">
                    <div class="status-card-header">
                        <span class="status-card-title">üìä Today</span>
                        <span class="status-badge ok" id="todaySignalsBadge">0</span>
                    </div>
                    <div class="status-value green" id="todaySignalsValue" style="font-size: 1.3rem;">0</div>
                    <div class="status-subtitle">Valid signals today</div>
                </div>

                <!-- Apex Quick Status -->
                <div class="status-card apex-quick-card">
                    <div class="status-card-header">
                        <span class="status-card-title">‚ö†Ô∏è Apex</span>
                        <span class="status-badge ok" id="apexQuickBadge">OK</span>
                    </div>
                    <div class="status-value" id="apexQuickValue" style="font-size: 1rem;">$0 / $2,500</div>
                    <div class="status-subtitle" id="apexQuickSubtitle">Daily loss remaining</div>
                </div>
            </div>

            <!-- System Stats Row -->
            <div class="status-grid" style="margin-bottom: 24px;">
                <!-- Market Regime Card -->
                <div class="status-card" style="background: linear-gradient(135deg, rgba(170, 102, 255, 0.1), rgba(68, 136, 255, 0.05)); border-color: rgba(170, 102, 255, 0.3);">
                    <div class="status-card-header">
                        <span class="status-card-title">üåä Market Regime</span>
                        <span class="status-badge warning" id="regimeBadge">UNKNOWN</span>
                    </div>
                    <div class="status-value" id="regimeValue" style="font-size: 1.1rem; color: var(--accent-purple);">Detecting...</div>
                    <div class="status-subtitle" id="regimeGuidance">Analyzing market conditions</div>
                </div>

                <!-- Key Levels Card -->
                <div class="status-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.08), rgba(0, 212, 255, 0.05)); border-color: rgba(0, 255, 136, 0.2);">
                    <div class="status-card-header">
                        <span class="status-card-title">üìç Key Levels</span>
                        <span class="status-badge warning" id="levelsBadge">BUILDING</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                        <div style="text-align: center; padding: 6px; background: rgba(0,255,136,0.1); border-radius: 6px;">
                            <div style="font-size: 0.65rem; color: var(--text-muted);">ORB Range</div>
                            <div id="orbRange" style="font-size: 0.85rem; font-family: 'JetBrains Mono';">--</div>
                        </div>
                        <div style="text-align: center; padding: 6px; background: rgba(255,68,102,0.1); border-radius: 6px;">
                            <div style="font-size: 0.65rem; color: var(--text-muted);">PDH / PDL</div>
                            <div id="pdhPdl" style="font-size: 0.85rem; font-family: 'JetBrains Mono';">-- / --</div>
                        </div>
                    </div>
                </div>

                <!-- System Status -->
                <div class="status-card" style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(68, 136, 255, 0.05)); border-color: rgba(0, 212, 255, 0.2);">
                    <div class="status-card-header">
                        <span class="status-card-title">üìä System</span>
                        <span class="status-badge ok">Live</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                        <div style="text-align: center;">
                            <div class="status-value green" style="font-size: 1.1rem;" id="webhookCount">0</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">Webhooks</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="status-value yellow" style="font-size: 1.1rem;" id="signalCount">0</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">Signals</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="status-value blue" style="font-size: 1.1rem;" id="candleCount">0</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">Candles</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Candle History Status -->
            <div class="settings-section" style="margin-bottom: 24px; background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(68, 136, 255, 0.05)); border-color: rgba(0, 212, 255, 0.3);">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                    <div>
                        <span style="font-weight: 600; font-size: 1.1em;">üìä Candle History</span>
                        <p style="margin: 4px 0 0 0; opacity: 0.7; font-size: 0.85em;" id="candleStatusText">Loading...</p>
                    </div>
                    <div id="candleStatusBadge" class="status-badge warning">Loading</div>
                </div>
                <div id="candleDetails" style="margin-top: 12px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="settings-section" style="margin-bottom: 24px; background: linear-gradient(135deg, rgba(0, 255, 136, 0.08), rgba(0, 212, 255, 0.05)); border-color: rgba(0, 255, 136, 0.3);">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                    <div>
                        <span style="font-weight: 600; font-size: 1.1em;">‚ö° Quick Actions</span>
                        <p style="margin: 4px 0 0 0; opacity: 0.7; font-size: 0.85em;">Run analysis or clear data</p>
                    </div>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="analyzeNow()" id="analyzeBtn" style="background: linear-gradient(135deg, #00ff88, #00d4ff); color: #0a0f1a; font-weight: 600;">
                            üîç Analyze Now
                        </button>
                        <button class="btn btn-outline" onclick="clearAllData()" style="border-color: #ff4466; color: #ff4466;">
                            üóëÔ∏è Clear All
                        </button>
                    </div>
                </div>
            </div>

            <!-- Webhook URL -->
            <div class="settings-section" style="margin-bottom: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <span style="font-weight: 600;">üì° TradingView Webhook URL</span>
                </div>
                <div style="display: flex; gap: 12px;">
                    <input type="text" class="setting-input" id="webhookUrl" readonly value="Loading..." style="flex: 1;">
                    <button class="btn btn-primary copy-btn" onclick="copyWebhookUrl()">üìã Copy</button>
            </div>
        </div>

        <!-- Active Tickers Display -->
        <div class="settings-section" style="margin-bottom: 24px; background: linear-gradient(135deg, rgba(68, 136, 255, 0.08), rgba(170, 102, 255, 0.05)); border-color: rgba(68, 136, 255, 0.3);">
            <div class="settings-header">
                <div class="settings-title"><span>üìà</span><span>Active Tickers</span></div>
            </div>
            <div style="padding: 16px; display: flex; gap: 12px; flex-wrap: wrap;">
                <div class="ticker-badge" style="padding: 8px 16px; background: var(--bg-secondary); border-radius: 8px;">
                    <strong>MNQ</strong> <span style="opacity: 0.7;">| $0.50/tick</span>
                </div>
                <div class="ticker-badge" style="padding: 8px 16px; background: var(--bg-secondary); border-radius: 8px;">
                    <strong>MES</strong> <span style="opacity: 0.7;">| $1.25/tick</span>
                </div>
                <div class="ticker-badge" style="padding: 8px 16px; background: var(--bg-secondary); border-radius: 8px;">
                    <strong>MGC</strong> <span style="opacity: 0.7;">| $1.00/tick</span>
                </div>
            </div>
        </div>

        <!-- Trade Journal -->
        <div class="section-header">
            <div>
                <h2 class="section-title">üìî Trade Journal</h2>
                    <p class="section-subtitle">Auto-tracked signals with outcomes</p>
            </div>
            <div style="display: flex; gap: 8px;">
                <button class="btn btn-outline" onclick="deleteSelectedTrades()" id="deleteSelectedBtn" style="border-color: #ff4466; color: #ff4466; display: none;">
                    üóëÔ∏è Delete Selected (<span id="selectedCount">0</span>)
                </button>
            </div>
        </div>
            <div class="signals-container" style="margin-bottom: 24px;">
            <table class="signals-table">
                <thead>
                    <tr>
                            <th style="width: 30px;"><input type="checkbox" id="selectAllTrades" onchange="toggleSelectAll(this)" title="Select All"></th>
                            <th>Time (EST)</th><th>Ticker</th><th>Direction</th><th>Conf</th><th>Entry</th><th>Stop</th><th>Target</th><th>Status</th><th>Actions</th>
                    </tr>
                </thead>
                <tbody id="tradeJournalBody">
                        <tr><td colspan="10"><div class="empty-state"><div class="empty-state-icon">üìî</div><div class="empty-state-text">No trades logged yet</div></div></td></tr>
                </tbody>
            </table>
        </div>

        <!-- Recent Signals -->
        <div class="section-header">
            <div>
                    <h2 class="section-title">üìä Recent Signals</h2>
                    <p class="section-subtitle">AI-analyzed opportunities</p>
            </div>
        </div>
        <div class="signals-container">
            <table class="signals-table">
                <thead>
                    <tr>
                            <th>Time</th><th>Ticker</th><th>Direction</th><th>Confidence</th><th>Entry</th><th>Stop</th><th>Target</th><th>Status</th>
                    </tr>
                </thead>
                <tbody id="signalsBody">
                        <tr><td colspan="8"><div class="empty-state"><div class="empty-state-icon">üìä</div><div class="empty-state-text">No signals yet</div></div></td></tr>
                </tbody>
            </table>
        </div>

        <!-- Live Feed -->
        <div class="live-feed">
            <div class="live-feed-header">
                    <div class="live-feed-title"><div class="live-dot"></div><span>Live Activity</span></div>
                    <button class="btn btn-outline" style="padding: 6px 12px; font-size: 0.75rem;" onclick="clearLogs()">Clear</button>
            </div>
            <div class="live-feed-content" id="liveFeed">
                    <div class="log-entry info"><span class="log-time">--:--:--</span><span class="log-message">Waiting for data...</span></div>
                </div>
            </div>
        </div>

        <!-- Apex Rules Tab -->
        <div id="tab-apex" class="tab-content">
            <div class="apex-panel">
                <div class="apex-header">
                    <span class="apex-title">üèÜ Apex Trader Funding Rules</span>
                    <div>
                        <span id="apexBalance" style="font-family: 'JetBrains Mono'; font-weight: 600; margin-right: 16px;">$50,000</span>
                        <span id="apexPnl" style="font-family: 'JetBrains Mono'; font-weight: 600;">$0</span>
                    </div>
                </div>
                <div class="apex-grid">
                    <!-- Daily Loss Limit -->
                    <div class="apex-rule">
                        <div class="apex-rule-header">
                            <span class="apex-rule-title">üìâ Daily Loss Limit</span>
                            <span class="status-badge ok" id="dailyLossBadge">OK</span>
                        </div>
                        <div class="apex-progress-bar">
                            <div class="apex-progress-fill ok" id="dailyLossProgress" style="width: 0%"></div>
                        </div>
                        <div class="apex-rule-stats">
                            <span id="dailyLossValue">$0 / $2,500</span>
                            <span id="dailyLossPct">0%</span>
                        </div>
                        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 8px;">Warning at 80% ‚Ä¢ Block at 100%</p>
                    </div>

                    <!-- Trailing Drawdown -->
                    <div class="apex-rule">
                        <div class="apex-rule-header">
                            <span class="apex-rule-title">üìä Trailing Drawdown</span>
                            <span class="status-badge ok" id="drawdownBadge">OK</span>
                        </div>
                        <div class="apex-progress-bar">
                            <div class="apex-progress-fill ok" id="drawdownProgress" style="width: 0%"></div>
                        </div>
                        <div class="apex-rule-stats">
                            <span id="drawdownValue">$0 / $2,500</span>
                            <span id="drawdownPct">0%</span>
                        </div>
                        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 8px;">Tracks from high water mark</p>
                    </div>

                    <!-- Consistency Rule -->
                    <div class="apex-rule">
                        <div class="apex-rule-header">
                            <span class="apex-rule-title">‚öñÔ∏è Consistency Rule</span>
                            <span class="status-badge ok" id="consistencyBadge">OK</span>
                        </div>
                        <div class="apex-progress-bar">
                            <div class="apex-progress-fill ok" id="consistencyProgress" style="width: 0%"></div>
                        </div>
                        <div class="apex-rule-stats">
                            <span id="consistencyValue">0% / 30%</span>
                        </div>
                        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 8px;">No day > 30% of total profits</p>
                    </div>
                </div>
            </div>

            <!-- Daily P&L History Chart -->
            <div class="chart-container" style="margin-bottom: 24px;">
                <div class="chart-header">
                    <span class="chart-title">üìä Daily P&L History</span>
                    <span id="apexTotalPnlLabel" style="font-family: 'JetBrains Mono'; color: var(--accent-green);">$0</span>
                </div>
                <div class="chart-wrapper"><canvas id="apexPnlChart"></canvas></div>
            </div>

            <!-- Account Equity Curve -->
            <div class="chart-container" style="margin-bottom: 24px;">
                <div class="chart-header">
                    <span class="chart-title">üìà Account Balance & Drawdown Floor</span>
                </div>
                <div class="chart-wrapper"><canvas id="apexEquityChart"></canvas></div>
            </div>

            <!-- Daily P&L Table -->
            <div class="signals-container" style="margin-bottom: 24px;">
                <div style="padding: 14px 18px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color);">
                    <span style="font-weight: 600;">üìÖ Daily Breakdown</span>
                </div>
                <table class="signals-table">
                    <thead>
                        <tr><th>Date</th><th>P&L</th><th>% of Daily Limit</th><th>% of Total Profits</th><th>Status</th></tr>
                    </thead>
                    <tbody id="apexDailyBody">
                        <tr><td colspan="5"><div class="empty-state">No trading days recorded</div></td></tr>
                    </tbody>
                </table>
            </div>

            <!-- Apex Configuration -->
            <div class="settings-section">
                <div class="settings-header">
                    <div class="settings-title"><span>‚öôÔ∏è</span><span>Apex Account Configuration</span></div>
                </div>
                <div class="settings-content">
                    <div class="setting-group">
                        <label class="setting-label">Account Size</label>
                        <input type="number" class="setting-input" id="apexAccountSize" value="50000">
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">Daily Loss Limit</label>
                        <input type="number" class="setting-input" id="apexDailyLoss" value="2500">
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">Trailing Drawdown</label>
                        <input type="number" class="setting-input" id="apexDrawdown" value="2500">
                    </div>
                    <div style="grid-column: 1 / -1; display: flex; gap: 12px; margin-top: 12px;">
                        <button class="btn btn-success" onclick="saveApexConfig()">üíæ Save Config</button>
                        <button class="btn btn-outline" onclick="resetApexState()">üîÑ Reset State</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="tab-analytics" class="tab-content">
            <!-- Charts -->
            <div class="analytics-grid">
                <div class="chart-container">
                    <div class="chart-header"><span class="chart-title">üìà Win Rate Over Time</span></div>
                    <div class="chart-wrapper"><canvas id="winRateChart"></canvas></div>
                </div>
                <div class="chart-container">
                    <div class="chart-header"><span class="chart-title">üí∞ P&L Over Time</span></div>
                    <div class="chart-wrapper"><canvas id="pnlChart"></canvas></div>
                </div>
            </div>

            <!-- Direction Performance -->
            <div class="analytics-grid">
                <div class="analytics-card">
                    <div class="analytics-card-header"><span class="analytics-card-title">üìà Long Trades</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Win Rate</span><span class="analytics-item-value green" id="longWinRate">--%</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Total P&L</span><span class="analytics-item-value" id="longPnl">--</span></div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-card-header"><span class="analytics-card-title">üìâ Short Trades</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Win Rate</span><span class="analytics-item-value green" id="shortWinRate">--%</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Total P&L</span><span class="analytics-item-value" id="shortPnl">--</span></div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-card-header"><span class="analytics-card-title">üî• Streaks</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Current</span><span class="analytics-item-value" id="currentStreak">--</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Max Win</span><span class="analytics-item-value green" id="maxWinStreak">--</span></div>
                    <div class="analytics-item"><span class="analytics-item-label">Max Loss</span><span class="analytics-item-value red" id="maxLossStreak">--</span></div>
                </div>
            </div>

            <!-- Best/Worst Tickers -->
            <div class="analytics-grid">
                <div class="signals-container">
                    <div style="padding: 14px 18px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color);">
                        <span style="font-weight: 600;">üèÜ Best Tickers</span>
                    </div>
                    <table class="signals-table">
                        <thead><tr><th>Ticker</th><th>Trades</th><th>Win Rate</th><th>P&L</th></tr></thead>
                        <tbody id="bestTickersBody"><tr><td colspan="4" class="empty-state">No data</td></tr></tbody>
                    </table>
                </div>
                <div class="signals-container">
                    <div style="padding: 14px 18px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color);">
                        <span style="font-weight: 600;">‚ö†Ô∏è Worst Tickers</span>
                    </div>
                    <table class="signals-table">
                        <thead><tr><th>Ticker</th><th>Trades</th><th>Win Rate</th><th>P&L</th></tr></thead>
                        <tbody id="worstTickersBody"><tr><td colspan="4" class="empty-state">No data</td></tr></tbody>
                    </table>
                </div>
            </div>

            <!-- Confidence Performance -->
            <div class="signals-container" style="margin-top: 24px;">
                <div style="padding: 14px 18px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color);">
                    <span style="font-weight: 600;">üéØ Performance by Confidence Level</span>
                </div>
                <table class="signals-table">
                    <thead><tr><th>Confidence</th><th>Trades</th><th>Win Rate</th><th>Total P&L</th><th>Avg P&L</th></tr></thead>
                    <tbody id="confidenceBody"><tr><td colspan="5" class="empty-state">No data</td></tr></tbody>
                </table>
            </div>
        </div>

        <!-- AI Tuning Tab -->
        <!-- AI Coach Tab -->
        <div id="tab-coach" class="tab-content">
            <!-- Coach Header -->
            <div class="tuning-panel">
                <div class="apex-header">
                    <span class="apex-title">üß† AI Strategy Coach</span>
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <span style="color: var(--text-secondary);">Trend:</span>
                        <span id="coachTrend" style="font-weight: 600;">--</span>
                        <span id="coachPendingBadge" class="status-badge warning">0 pending</span>
                    </div>
                </div>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    AI analyzes your trading history and suggests improvements. Review each suggestion and approve or reject.
                </p>
                
                <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="runCoachAnalysis()">üîç Run Analysis</button>
                    <button class="btn btn-outline" onclick="loadCoachData()">üîÑ Refresh</button>
                </div>
                
                <!-- Quick Insights -->
                <div class="status-grid" style="margin-bottom: 0;">
                    <div class="status-card" style="background: transparent; border: none; padding: 10px;">
                        <div class="status-card-title">Total Trades</div>
                        <div class="status-value blue" id="coachTotalTrades">--</div>
                    </div>
                    <div class="status-card" style="background: transparent; border: none; padding: 10px;">
                        <div class="status-card-title">Win Rate</div>
                        <div class="status-value green" id="coachWinRate">--%</div>
                    </div>
                    <div class="status-card" style="background: transparent; border: none; padding: 10px;">
                        <div class="status-card-title">Changes This Week</div>
                        <div class="status-value yellow" id="coachChangesWeek">0</div>
                    </div>
                </div>
            </div>

            <!-- Pending Suggestions -->
            <div class="section-header">
                <div>
                    <h2 class="section-title">üìã Pending Suggestions</h2>
                    <p class="section-subtitle">Review and approve AI recommendations</p>
                </div>
            </div>
            
            <div id="coachSuggestions" class="suggestions-container">
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <div class="empty-state-text">Click "Run Analysis" to get suggestions</div>
                    <div class="empty-state-subtext">AI will analyze your trades and suggest improvements</div>
                </div>
            </div>

            <!-- Suggestion History -->
            <div class="section-header" style="margin-top: 24px;">
                <div>
                    <h2 class="section-title">üìú History</h2>
                    <p class="section-subtitle">Past suggestions and their outcomes</p>
                </div>
            </div>
            
            <div class="signals-container">
                <table class="signals-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Suggestion</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Impact</th>
                        </tr>
                    </thead>
                    <tbody id="coachHistoryBody">
                        <tr><td colspan="5"><div class="empty-state">No history yet</div></td></tr>
                    </tbody>
                </table>
            </div>

            <!-- Prompt Status -->
            <div class="settings-section" style="margin-top: 24px;">
                <div class="settings-header" onclick="togglePromptStatus()">
                    <div class="settings-title"><span>‚öôÔ∏è</span><span>AI Prompt Modifications</span></div>
                    <span class="settings-toggle" id="promptToggle">‚ñº</span>
                </div>
                <div class="settings-content hidden" id="promptContent">
                    <div class="setting-group">
                        <label class="setting-label">Emphasized Patterns</label>
                        <div id="emphasizedPatterns" class="ticker-tags">None yet</div>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">Caution Patterns</label>
                        <div id="cautionPatterns" class="ticker-tags">None yet</div>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">Time Filters</label>
                        <div id="timeFilters">None configured</div>
                    </div>
                    <div style="grid-column: 1 / -1; margin-top: 12px;">
                        <button class="btn btn-outline" onclick="resetPromptMods()">üîÑ Reset All Modifications</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="/static/dashboard.js"></script>
</body>
</html>
